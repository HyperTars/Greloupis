language: python
python:
  - "3.8"
  - "3.7"
sudo: required
services:
  - docker
env:
  global:
    - TRAVIS=true
#before_install:
install: true
# before_script:
script:
  - node -v
  - sudo npm install n -g && n stable
  - make dev_env
  - make tests
#deploy:
#  provider: releases
#  api_key: $GITHUB_TOKEN
#  file_glob: true
#  file:
#    - backend/*
#  skip_cleanup: true
#  on:
#    tags: true

# after_failure:
after_success:
  - make coverage
  - test $TRAVIS_BRANCH = "master" && test $TRAVIS_PULL_REQUEST = "false" && make docker_push
  - test $TRAVIS_BRANCH = "master" && test $TRAVIS_PULL_REQUEST = "false" && make heroku

notifications:
  email: false
# [OPTIONAL] before_deploy
# [OPTIONAL] deploy
# [OPTIONAL] after_deploy
# after_script
